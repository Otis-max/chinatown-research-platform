<!DOCTYPE html>
<html lang="zh-CN">
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>welcome to my world CHINATOWN</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- AOS 动画库 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* 导航栏样式 */
        .navbar {
            background: #333;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            padding: 9px 0; 
        }
        
        .navbar-brand {
            font-weight: 700;
            color: #dc3545 !important;
            font-size: 4rem;
        }

        .navbar-brand {
         display: flex;
         align-items: center;
         text-decoration: none;
         padding: 0;
        }

        .navbar-logo {
         height: 60px;
         width: auto;
         transition: transform 0.3s ease;
        }

         .navbar-logo:hover {
         transform: scale(1.05);
        }

  /* 响应式设计 - 小屏幕时稍微缩小 */
@media (max-width: 768px) {
    .navbar-logo {
        height: 45px; /* 从35px改为45px */
    }
    
    .navbar-brand {
        font-size: 1.6rem; /* 新增 */
    }
    
    .nav-link {
        font-size: 1.1rem; /* 新增 */
        margin: 0 10px; /* 新增 */
    }
    
    .navbar {
        padding: 6px 0; /* 新增 */
    }
}

        
        
         .nav-link {
            color: white !important;
            font-weight: 500;
            margin: 0 10px;
            transition: color 0.3s ease;
            font-size: 1.2rem;
        }
        
        .nav-link:hover {
            color: #dc3545 !important;
        }
        
        /* 英雄区域 */
        .hero-section {
            height: 100vh;
            background: linear-gradient(rgba(220, 53, 69, 0.2), rgba(139, 69, 19, 0.5)), 
                        url('https://gocity.com.cn/upload/images/20220622/150347462.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            position: relative;
        }
        
        .hero-content h1 {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            font-weight: 300;
        }

      
        
        /* 卡片网格 */
        .card-grid {
            padding: 5rem 0;
            background: #f8f9fa;
        }
        
        .feature-card {
            background: white;
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            cursor: pointer;
            overflow: hidden;
            position: relative;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #dc3545, #c82333);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .feature-card:hover::before {
            opacity: 0.9;
        }
        
        .feature-card:hover .card-content {
            color: white;
            z-index: 2;
            position: relative;
        }
        
        .card-icon {
            font-size: 3rem;
            color: #dc3545;
            margin-bottom: 1rem;
            transition: color 0.3s ease;
        }
        
        .feature-card:hover .card-icon {
            color: white;
        }
        
        .card-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            transition: color 0.3s ease;
        }
        
        .card-content p {
            font-size: 1rem;
            line-height: 1.6;
            transition: color 0.3s ease;
        }
        
        /* 内容区域 */
        .content-section {
            padding: 5rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .section-title p {
            font-size: 1.2rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* 统计数据 */
        .stats-section {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 3rem 0;
        }
        
        .stat-item {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            display: block;
        }
        
        .stat-label {
            font-size: 1.2rem;
            margin-top: 0.5rem;
        }
        
        /* 页脚 */
        .footer {
            background: #333;
            color: white;
            padding: 1.5rem 0 0.5rem;
            text-align: center;
        }
        
        /* 响应式设计 */
@media (max-width: 768px) {
    .hero-content h1 {
        font-size: 2.5rem;
    }
    
    .hero-content p {
        font-size: 1.1rem;
    }
    
    .feature-card {
        height: 250px;
        margin-bottom: 2rem;
    }
    
    .project-intro-box {
        padding: 1.5rem;
        margin-top: 1.5rem;
    }
    
    .intro-content h3 {
        font-size: 1.5rem;
    }
    
    .intro-content p {
        font-size: 0.9rem;
    }
}
        
        /* 滚动动画 */
        .fade-up {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        .fade-up.aos-animate {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
         <a class="navbar-brand" href="#">
          <img src="tubiao.jpg" alt="唐人街商标" class="navbar-logo">
         </a>


            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="Chinatown2025.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="About us.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Origin.html">Origin</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Development.html">Development</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Current situation.html">Current situation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Video.html">Festival</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Contact us.html">Contact us</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 英雄区域 -->
    <section id="home" class="hero-section">
        <div class="hero-content" data-aos="fade-up" data-aos-duration="1000">
            <h1>Explore Chinatowns around the world</h1>
            <p>Inheriting Chinese culture and connecting the global Chinese community</p>
            


            
        </div>
        </div>
    </section>




    <!-- Styles -->
<style>
#chartdiv {
  width: 100%;
  height: 700px;
}
</style>

<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/map.js"></script>
<script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

<!-- Chart code -->
<script>
am5.ready(function() {

var bulletColor = am5.color(0xc83830);
var polygonColor = am5.color(0xd9cec8);

var data = [
  {
    "id": "US",
    "Number": 15,
    "Population": 540
  },
  {
    "id": "CA",
    "Number": 10,
    "Population": 177
  },
  {
    "id": "AU",
    "Number": 8,
    "Population": 140
  },
  {
    "id": "GB",
    "Number": 5,
    "Population": 50
  },
  {
    "id": "FR",
    "Number": 3,
    "Population": 60
  },
  {
    "id": "DE",
    "Number": 3,
    "Population": 20
  },
  {
    "id": "IT",
    "Number": 3,
    "Population": 30
  },
  {
    "id": "NL",
    "Number": 2,
    "Population": 12
  },
  {
    "id": "BE",
    "Number": 2,
    "Population": 3.5
  },
  {
    "id": "ES",
    "Number": 2,
    "Population": 22
  },
  {
    "id": "PT",
    "Number": 1,
    "Population": 3
  },
  {
    "id": "RU",
    "Number": 2,
    "Population": 20
  },
  {
    "id": "JP",
    "Number": 5,
    "Population": 92
  },
  {
    "id": "KR",
    "Number": 3,
    "Population": 85
  },
  {
    "id": "TH",
    "Number": 3,
    "Population": 700
  },
  {
    "id": "MY",
    "Number": 5,
    "Population": 740
  },
  {
    "id": "SG",
    "Number": 1,
    "Population": 280
  },
  {
    "id": "PH",
    "Number": 3,
    "Population": 150
  },
  {
    "id": "ID",
    "Number": 5,
    "Population": 280
  },
 {
    "id": "VN",
    "Number": 5,
    "Population": 100
  },
  {
    "id": "MM",
    "Number": 2,
    "Population": 110
  },
  {
    "id": "KH",
    "Number": 1,
    "Population": 50
  },
  {
    "id": "LA",
    "Number": 1,
    "Population": 20
  },
  {
    "id": "BR",
    "Number": 2,
    "Population": 30
  },
  {
    "id": "AR",
    "Number": 1,
    "Population": 12
  },
  {
    "id": "PE",
    "Number": 1,
    "Population": 15
  },
  {
    "id": "CL",
    "Number": 1,
    "Population": 5
  },
  {
    "id": "ZA",
    "Number": 2,
    "Population": 35
  },
  {
    "id": "NG",
    "Number": 1,
    "Population": 10
  },
  {
    "id": "MA",
    "Number": 1,
    "Population": 2
  },
  {
    "id": "NZ",
    "Number": 2,
    "Population": 24
  },  
  {
    "id": "MX",
    "Number": 1,
    "Population": 7
  },
  {
    "id": "CU",
    "Number": 1,
    "Population": 1.5
  },
  {
    "id": "IE",
    "Number": 1,
    "Population": 6
  },
  {
    "id": "AO",
    "Number": 1,
    "Population": 3
  },
  {
    "id": "DO",
    "Number": 1,
    "Population": 2
  },
  {
    "id": "TR",
    "Number": 1,
    "Population": 5
  },
  {
    "id": "MU",
    "Number": 1,
    "Population": 3
  },
  {
    "id": "AE",
    "Number": 1,
    "Population": 30
  }
]


var root = am5.Root.new("chartdiv");

var myTheme = am5.Theme.new(root);

myTheme.rule("InterfaceColors").setAll({
  primaryButton: am5.color(0xc83830),
  primaryButtonHover: am5.Color.lighten(am5.color(0xc83830), 0.2),
  primaryButtonDown: am5.Color.lighten(am5.color(0xc83830), -0.2),
  primaryButtonActive: am5.color(0xd9cec8),
});


myTheme.rule("Label").setAll({
  fontSize: "0.8em"
});

root.setThemes([am5themes_Animated.new(root), myTheme]);

var chart = root.container.children.push(am5map.MapChart.new(root, {
  projection: am5map.geoMercator()
}));

var graticuleSeries = chart.series.unshift(
  am5map.GraticuleSeries.new(root, {
    step: 10
  })
);

graticuleSeries.mapLines.template.set("strokeOpacity", 0.05)


var cont = chart.children.push(am5.Container.new(root, {
  layout: root.horizontalLayout,
  x: am5.percent(15),
  centerX: 0,
  y: am5.percent(100),
  dy: -40
}));

// Add labels and controls
cont.children.push(am5.Label.new(root, {
  centerY: am5.p50,
  text: "Map"
}));

var switchButton = cont.children.push(am5.Button.new(root, {
  themeTags: ["switch"],
  centerY: am5.p50,
  icon: am5.Circle.new(root, {
    themeTags: ["icon"]
  })
}));

switchButton.on("active", function () {
  if (!switchButton.get("active")) {
    chart.set("projection", am5map.geoMercator());
    chart.set("panY", "translateY");
    chart.set("rotationY", 0);
    polygonSeries.set("exclude", ["AQ"]);
    
  } else {
    chart.set("projection", am5map.geoOrthographic());
    chart.set("panY", "rotateY")
    chart.set("panX", "rotateX");
    polygonSeries.set("exclude", []);
    chart.animate({ key: "rotationX", to: chart.get("rotationX") + 360, duration: 15000, easing: am5.ease.inOut(am5.ease.cubic) });
  }
});

cont.children.push(
  am5.Label.new(root, {
    centerY: am5.p50,
    text: "Globe"
  })
);


// proposed switch button

chart.set("paddingTop", 40); 
var cont2 = chart.children.push(am5.Container.new(root, {
  layout: root.horizontalLayout,
  x: am5.percent(85),
  centerX: am5.p100,
  y: am5.percent(100),
  dy: -40
}));

// Add labels and controls
cont2.children.push(am5.Label.new(root, {
  centerY: am5.p50,
  text: "Number"
}));

var switchButton2 = cont2.children.push(am5.Button.new(root, {
  themeTags: ["switch"],
  centerY: am5.p50,
  icon: am5.Circle.new(root, {
    themeTags: ["icon"]
  })
}));

switchButton2.on("active", function () {
  if (!switchButton2.get("active")) {
    polygonSeries.set("valueField", "Number");
    polygonSeries.data.setAll(data);

  } else {
    polygonSeries.set("valueField", "Population");    
    polygonSeries.data.setAll(data);
  }
});

cont2.children.push(
  am5.Label.new(root, {
    centerY: am5.p50,
    text: "Population(10k)"
  })
);

var polygonSeries = chart.series.push(
  am5map.MapPolygonSeries.new(root, {
    geoJSON: am5geodata_worldLow,
    valueField: "Number",
    calculateAggregates: true,
    exclude: ["AQ"]
  })
);

polygonSeries.mapPolygons.template.events.on("pointerover", function (ev) {
  heatLegend.showValue(ev.target.dataItem.get("value"));
});

polygonSeries.set("heatRules", [{
  target: polygonSeries.mapPolygons.template,
  dataField: "value",
  min: am5.color(0xd3a29f),
  max: am5.color(0x6f0600),
  key: "fill"
}]);

polygonSeries.mapPolygons.template.setAll({
  tooltipText: "{name} {value}",
  fill: polygonColor,
  stroke: am5.color(0xffffff)
});

polygonSeries.data.setAll(data);


var heatLegend = chart.children.push(am5.HeatLegend.new(root, {
  orientation: "vertical",
  startColor: am5.color(0xd3a29f),
  endColor: am5.color(0x6f0600),
  startText: "Lowest",
  endText: "Highest",
  stepCount: 8,
  x: am5.p100,
  centerX: am5.p100,
  paddingRight: 20,
  paddingTop: 20,
  paddingBottom: 20
}));

heatLegend.startLabel.setAll({
  fontSize: 12,
  fill: heatLegend.get("startColor")
});

heatLegend.endLabel.setAll({
  fontSize: 12,
  fill: heatLegend.get("endColor")
});

// change this to template when possible
polygonSeries.events.on("datavalidated", function () {
  heatLegend.set("startValue", polygonSeries.getPrivate("valueLow"));
  heatLegend.set("endValue", polygonSeries.getPrivate("valueHigh"));
});


var title = chart.children.push(am5.Label.new(root, {
  text: "Number of Chinatowns on world countries",
  fontSize: 30,
  fontWeight: "bold", 
  fill: am5.color(0x8B0000),
  x: am5.percent(50),
  centerX: am5.p50,
  y: 0
}));

}); // end am5.ready()
</script>

<!-- HTML -->
<div id="chartdiv"></div>





 <!-- 统计数据区域 -->
    <section class="stats-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-item" data-aos="fade-up" data-aos-delay="100">
                        <span class="stat-number" data-count="100+">0</span>
                        <div class="stat-label">of Chinatowns around the world</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-item" data-aos="fade-up" data-aos-delay="200">
                        <span class="stat-number" data-count="50+">0</span>
                        <div class="stat-label">of Covered countries</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-item" data-aos="fade-up" data-aos-delay="300">
                        <span class="stat-number" data-count="15M+">0</span>
                        <div class="stat-label">of Chinese people live</div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-item" data-aos="fade-up" data-aos-delay="400">
                        <span class="stat-number" data-count="150+">0</span>
                        <div class="stat-label">Years of historical heritage</div>
                    </div>
                </div>
            </div>
        </div>
    </section>




    






   
   







     <!-- <div id="embed-iframe"></div> -->
    <iframe id="spotifyPlayer"
        style="border-radius:12px; width: 17rem; height: 6rem; position: fixed; z-index: 999; bottom: 0.1rem; left: 1rem;transition: bottom 0.5s ease;"
        src="https://open.spotify.com/embed/track/1g5CzfIlMektW5Q0ecPBAT" width="100%" height="352"
        frameBorder="0" allowfullscreen=""
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Universiti Malaya MLIS. All rights reserved.</p>
            <p>Explore the development of Chinatown and inherit Chinese civilization</p>
            <p>Designed by &nbsp &nbsp &nbsp &nbspZHAO XIAOMING  &nbsp &nbsp &nbsp &nbsp ZHOU SHENGNAN</p>
            <p>LU WEIXIN &nbsp &nbsp &nbsp &nbsp  GUO JIAYI &nbsp &nbsp &nbsp &nbsp LI JIALIN</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <!-- AOS 动画库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    
    <!-- amCharts 库 -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/flow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/timeline.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/region/world/europeLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    
    <script>
        // 初始化 AOS 动画
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
        
        // 数字计数动画 - 支持带符号版本
function animateCounters() {
    const counters = document.querySelectorAll('.stat-number');
    
    counters.forEach(counter => {
        const dataCount = counter.getAttribute('data-count');
        
        // 提取数字部分和后缀
        const numMatch = dataCount.match(/(\d+)/);
        const suffix = dataCount.replace(/\d+/, ''); // 获取非数字部分
        
        if (numMatch) {
            const target = parseInt(numMatch[1]);
            const duration = 2000; // 2秒
            const step = target / (duration / 16); // 60fps
            let current = 0;
            
            const updateCounter = () => {
                current += step;
                if (current < target) {
                    // 显示当前数字 + 后缀
                    counter.textContent = Math.floor(current) + suffix;
                    requestAnimationFrame(updateCounter);
                } else {
                    // 显示最终数字 + 后缀
                    counter.textContent = target + suffix;
                }
            };
            
            updateCounter();
        } else {
            // 如果没有数字，直接显示原始内容
            counter.textContent = dataCount;
        }
    });
}
        
        // 监听滚动到统计区域时触发计数动画
        const statsSection = document.querySelector('.stats-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounters();
                    observer.unobserve(entry.target);
                }
            });
        });
        
        observer.observe(statsSection);
        
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
     

        // 等待页面和库完全加载后初始化图表
        window.addEventListener('load', function() {
            // 检查 am5 是否已加载
            if (typeof am5 !== 'undefined') {
                am5.ready(function() {
                    // 初始化流向图
                    initFlowChart();
                    
                    // 初始化地图和蛇形图
                    initMapAndSerpentineChart();
                });
            } else {
                console.error('amCharts 5 库未能正确加载');
            }
        });

        // 流向图
        function initFlowChart() {
            var root = am5.Root.new("flowchartdiv");
            root.setThemes([am5themes_Animated.new(root)]);

            var series = root.container.children.push(
                am5flow.ChordDirected.new(root, {
                    sourceIdField: "from",
                    targetIdField: "to",
                    valueField: "value",
                    sort: "ascending"
                })
            );

            series.links.template.set("fillStyle", "source");
            series.nodes.get("colors").set("step", 2);
            
            series.nodes.data.setAll([
                { id: "广东 GuangDong" },
                { id: "福建 FuJian" },
                { id: "浙江 ZheJiang" },
                { id: "江苏 JiangSu" },
                { id: "山东 ShanDong" },
                { id: "东北 NorthEast" },
                { id: "美洲 Americas" },
                { id: "非洲 Africa" },
                { id: "欧洲 Europe" },
                { id: "亚洲 Asia" }
            ]);

            series.bullets.push(function (_root, _series, dataItem) {
                var bullet = am5.Bullet.new(root, {
                    locationY: Math.random(),
                    sprite: am5.Circle.new(root, {
                        radius: 2,
                        fill: dataItem.get("source").get("fill")
                    })
                });

                bullet.animate({
                    key: "locationY",
                    to: 1,
                    from: 0,
                    duration: Math.random() * 1000 + 2000,
                    loops: Infinity
                });

                return bullet;
            });

            series.nodes.labels.template.setAll({
                textType: "regular",
                fill: root.interfaceColors.get("background"),
                fontSize: "1.1em",
                radius: -5
            });

            series.data.setAll([
                { from: "广东 GuangDong", to: "亚洲 Asia", value: 900000 },
                { from: "广东 GuangDong", to: "美洲 Americas", value: 600000 },
                { from: "广东 GuangDong", to: "非洲 Africa", value: 550000 },
                { from: "福建 FuJian", to: "欧洲 Europe", value: 400000 },
                { from: "福建 FuJian", to: "美洲 Americas", value: 600000},
                { from: "浙江 ZheJiang", to: "美洲 Americas", value: 100000 },
                { from: "浙江 ZheJiang", to: "欧洲 Europe", value: 350000 },
                { from: "山东 ShanDong", to: "亚洲 Asia", value: 600000 },
                { from: "江苏 JiangSu", to: "欧洲 Europe", value: 300000 },
                { from: "东北 NorthEast", to: "亚洲 Asia", value: 400000 }
            ]);

            series.appear(1000, 100);
        }

        // 地图和蛇形图
        function initMapAndSerpentineChart() {
            var mainColor = am5.color(0xdc3545);
            var secondaryColor = am5.color(0xf8d7da);
            var pointSeries;
            var serpentineSeries;

            var data = [
                {
                    "distance": 0,
                    "category": "city",
                    "name": "Vilnius",
                    "altitude": 112,
                    "date": new Date("2025-05-01").getTime(),
                    "population": 607404,
                    "geometry": { "type": "Point", "coordinates": [25.279652, 54.687157] }
                },
                {
                    "distance": 462,
                    "category": "city",
                    "name": "Warsaw",
                    "altitude": 100,
                    "date": new Date("2025-05-02").getTime(),
                    "population": 1793579,
                    "geometry": { "type": "Point", "coordinates": [21.01178, 52.22977] }
                },
                {
                    "distance": 1033,
                    "category": "city",
                    "name": "Berlin",
                    "altitude": 34,
                    "date": new Date("2025-05-03").getTime(),
                    "population": 3769000,
                    "geometry": { "type": "Point", "coordinates": [13.41053, 52.52437] }
                },
                {
                    "distance": 1604,
                    "category": "city",
                    "name": "Amsterdam",
                    "altitude": 2,
                    "date": new Date("2025-05-04").getTime(),
                    "population": 933680,
                    "geometry": { "type": "Point", "coordinates": [4.897070, 52.377956] }
                },
                {
                    "distance": 1813,
                    "category": "city",
                    "name": "Brussels",
                    "altitude": 13,
                    "date": new Date("2025-05-05").getTime(),
                    "population": 1250000,
                    "geometry": { "type": "Point", "coordinates": [4.34878, 50.85045] }
                },
                {
                    "distance": 2125,
                    "category": "city",
                    "name": "Paris",
                    "altitude": 35,
                    "date": new Date("2025-05-06").getTime(),
                    "population": 2048472,
                    "geometry": { "type": "Point", "coordinates": [2.349014, 48.864716] }
                },
                {
                    "distance": 2772,
                    "category": "city",
                    "name": "Zurich",
                    "altitude": 408,
                    "date": new Date("2025-05-07").getTime(),
                    "population": 448664,
                    "geometry": { "type": "Point", "coordinates": [8.55, 47.36667] }
                },
                {
                    "distance": 3300,
                    "category": "city",
                    "name": "Vienna",
                    "altitude": 171,
                    "date": new Date("2025-05-08").getTime(),
                    "population": 1921153,
                    "geometry": { "type": "Point", "coordinates": [16.363449, 48.210033] }
                },
                {
                    "distance": 3546,
                    "category": "city",
                    "name": "Budapest",
                    "altitude": 96,
                    "date": new Date("2025-05-09").getTime(),
                    "population": 1780390,
                    "geometry": { "type": "Point", "coordinates": [19.04, 47.4980] }
                },
                {
                    "distance": 4254,
                    "category": "city",
                    "name": "Venice",
                    "altitude": 1,
                    "date": new Date("2025-05-10").getTime(),
                    "population": 258685,
                    "geometry": { "type": "Point", "coordinates": [12.33265, 45.43713] }
                },
                {
                    "distance": 5000,
                    "category": "city",
                    "name": "Rome",
                    "altitude": 21,
                    "date": new Date("2025-05-11").getTime(),
                    "population": 4347100,
                    "geometry": { "type": "Point", "coordinates": [12.496366, 41.902782] }
                },
                {
                    "distance": 5229,
                    "category": "city",
                    "name": "Naples",
                    "altitude": 17,
                    "date": new Date("2025-05-12").getTime(),
                    "population": 2182170,
                    "geometry": { "type": "Point", "coordinates": [14.305573, 40.853294] }
                },
                {
                    "distance": 5957,
                    "category": "city",
                    "name": "Palermo",
                    "altitude": 14,
                    "date": new Date("2025-05-13").getTime(),
                    "population": 851282,
                    "geometry": { "type": "Point", "coordinates": [13.3356, 38.1321] }
                }
            ];

            makeMapChart();
            makeSerpentineChart();

            function makeMapChart() {
                var root = am5.Root.new("mapdiv");
                root.setThemes([am5themes_Animated.new(root)]);

                var chart = root.container.children.push(am5map.MapChart.new(root, {
                    panX: "translateX",
                    panY: "translateY",
                    projection: am5map.geoMercator(),
                    homeGeoPoint: { longitude: 8.7, latitude: 50.5 },
                    homeZoomLevel: 3
                }));

                var polygonSeries = chart.series.push(am5map.MapPolygonSeries.new(root, {
                    geoJSON: am5geodata_region_world_europeLow
                }));

                polygonSeries.mapPolygons.template.setAll({
                    fill: secondaryColor,
                    stroke: am5.color(0xffffff),
                    strokeWidth: 1,
                    strokeOpacity: 0.5
                });

                polygonSeries.events.on("datavalidated", function () {
                    chart.goHome();
                });

                var lineSeries = chart.series.push(am5map.MapLineSeries.new(root, {}));
                lineSeries.mapLines.template.setAll({
                    stroke: am5.color(0x000000),
                    strokeDasharray: [3, 3],
                    strokeWidth: 1,
                    strokeOpacity: .5
                });

                pointSeries = chart.series.push(am5map.MapPointSeries.new(root, {
                    valueField: "population",
                    calculateAggregates: true,
                    idField: "name"
                }));

                var circleTemplate = am5.Template.new(root, {});

                pointSeries.set("heatRules", [{
                    target: circleTemplate,
                    min: 3,
                    max: 17,
                    dataField: "value",
                    key: "radius"
                }]);

                pointSeries.bullets.push(function (root, series, dataItem) {
                    var container = am5.Container.new(root, {});
                    var circle = container.children.push(am5.Circle.new(root, {
                        radius: 9,
                        fill: mainColor,
                        stroke: mainColor,
                        strokeWidth: 1,
                        strokeOpacity: 0.8,
                        fillOpacity: 0.7,
                        layer: 30
                    }, circleTemplate));

                    var label = container.children.push(am5.Label.new(root, {
                        text: "{name}",
                        fontSize: 13,
                        centerY: am5.p50,
                        centerX: am5.p100,
                        populateText: true,
                        layer: 30,
                        paddingRight: 4
                    }));

                    label.adapters.add("dx", function (dy, target) {
                        return -circle.get("radius");
                    });

                    return am5.Bullet.new(root, {
                        sprite: container,
                        locationX: 0,
                        locationY: 0.5
                    });
                });

                pointSeries.data.setAll(data);

                var pointsToConnect = [];
                am5.array.each(pointSeries.dataItems, function (dataItem) {
                    pointsToConnect.push(dataItem);
                });

                lineSeries.pushDataItem({
                    pointsToConnect: pointsToConnect
                });

                chart.appear(1000, 100);
            }

            function makeSerpentineChart() {
                var root = am5.Root.new("serpentinediv");
                root.setThemes([am5themes_Animated.new(root)]);

                var chart = root.container.children.push(am5timeline.SerpentineChart.new(root, {
                    levelCount: 3,
                    startLocation: 0.2,
                    endLocation: 1,
                    wheelY: "zoomX",
                    yAxisRadius: am5.percent(20)
                }));

                var yRenderer = am5timeline.AxisRendererCurveY.new(root, {});
                yRenderer.labels.template.setAll({ forceHidden: true });
                yRenderer.grid.template.set("forceHidden", true);

                var xRenderer = am5timeline.AxisRendererCurveX.new(root, {
                    yRenderer: yRenderer,
                    strokeDasharray: [2, 3],
                    strokeWidth: 2,
                    strokeOpacity: 0.5,
                    stroke: am5.color(0x000000)
                });

                var yAxis = chart.yAxes.push(am5xy.CategoryAxis.new(root, {
                    maxDeviation: 0,
                    categoryField: "category",
                    renderer: yRenderer
                }));

                var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {
                    renderer: xRenderer,
                    numberFormat: "#' km'"
                }));

                serpentineSeries = chart.series.push(am5timeline.CurveLineSeries.new(root, {
                    xAxis: xAxis,
                    yAxis: yAxis,
                    baseAxis: yAxis,
                    valueField: "population",
                    valueXField: "distance",
                    categoryYField: "category",
                    idField: "name",
                    maskBullets: false,
                    calculateAggregates: true
                }));

                serpentineSeries.strokes.template.setAll({ forceHidden: true });

                var circleTemplate = am5.Template.new(root, {});

                serpentineSeries.set("heatRules", [{
                    target: circleTemplate,
                    min: 3,
                    max: 35,
                    dataField: "value",
                    key: "radius"
                }]);

                serpentineSeries.bullets.push(function (root, series, dataItem) {
                    var container = am5.Container.new(root, {});

                    var circle = container.children.push(am5.Circle.new(root, {
                        radius: 9,
                        fill: mainColor,
                        stroke: mainColor,
                        strokeWidth: 2,
                        strokeOpacity: 0.8,
                        layer: 30,
                        tooltipText: "[bold fontSize: 20px]{name}[/]\n{date.formatDate('MMM dd, yyyy')}\npopulation: {population}",
                        tooltipY: 0,
                        fillOpacity: 0.7
                    }, circleTemplate));

                    var label = container.children.push(am5.Label.new(root, {
                        text: "{name}",
                        fontSize: 13,
                        centerY: am5.p100,
                        centerX: am5.p50,
                        populateText: true,
                        layer: 30
                    }));

                    label.adapters.add("dy", function (dy, target) {
                        return -circle.get("radius");
                    });

                    return am5.Bullet.new(root, {
                        sprite: container,
                        locationX: 0,
                        locationY: 0.5
                    });
                });

                serpentineSeries.data.setAll(data);

                yAxis.data.setAll([{ category: "city" }]);

                serpentineSeries.appear(1000);
                chart.appear(1000, 100);
            }
        }
    </script>
</body>
</html>
